<?xml version="1.0" encoding="UTF-8"?>
<paths>
    <!--  added validation for iati-ad fields --><path type="xs:double">@iati-ad:project-value</path><path type="xs:dateTime">@iati-ad:activity-modified</path>
    
    <!--  rules derived from the schema, tabular format and various compliance rules --><path code="Language">@xml:lang</path><path code="Currency" name="Default">@default-currency</path><path type="xs:integer">@hierarchy</path><path type="xs:dateTime">@last-updated-datetime</path><path type="xs:date">@iso-date</path><path type="xs:date">@value-date</path><path assertion="reporting-org absent">count($activity/reporting-org[@ref ne ""]) ge 1</path><path assertion="funding-org absent">count($activity/participating-org[@role="Funding"][@ref ne ""]) ge 1</path><path code="OrganisationIdentifier" name="Reporting">reporting-org/@ref</path><path code="OrganisationType">reporting-org/@type</path><path assertion="no single IATI-identifier">count($activity/iati-identifier[text() ne ""]) eq 1</path><path name="IATI-identifier">iati-identifier</path><path assertion="IATI-identifier does not start with the reporting organisation ref">
        starts-with($activity/iati-identifier,concat($activity/reporting-org/@ref,"-"))
    </path><path assertion="IATI-identifier has leading or trailing whitespace">
        string($activity/iati-identifier) eq normalize-space($activity/iati-identifier)
    </path><path code="OrganisationIdentifier" name="Other">other-identifier/@owner-ref</path><path assertion="title missing">count($activity/title[. ne ""]) ge 1 </path><path assertion="description absent">count($activity/description) ge 1</path><path code="DescriptionType">description/@type</path>
    
<!--    <path type="xs:anyURI">activity/website</path> --><path assertion="more than one activity-status ">count($activity/activity-status) le  1</path><path assertion="activity-status absent">count($activity[activity-status ne ""]) gt 0</path><path code="ActivityStatus" name="Status" text="Activity Status" priority="6">activity-status/@code</path><path code="ActivityDateType">activity-date/@type</path><path name="StartDate" type="xs:date" comp="ge">activity-date[@type='start-actual']/@iso-date</path><path name="EndDate" type="xs:date" comp="le">activity-date[@type='end-actual']/@iso-date</path><path assertion="start-actual before end-actual">
        let $start := $activity/activity-date[@type='start-actual']/@iso-date
        let $end := $activity/activity-date[@type='end-actual']/@iso-date
        return 
        if (exists($start) and exists($end)) then $start le $end else true()
    </path><path assertion="start-planned before end-planned">
        let $start := $activity/activity-date[@type='start-planned']/@iso-date
        let $end := $activity/activity-date[@type='end-planned']/@iso-date
        return 
        if (exists($start) and exists($end)) then $start le $end else true()
    </path><path code="OrganisationIdentifier" name="Participating">participating-org/@ref</path><path code="OrganisationRole" name="ParticipatingOrg">participating-org/@role</path><path code="OrganisationType">participating-org/@type</path><path code="OrganisationIdentifier" name="Funder" search="yes" priority="6" group="yes">participating-org[@role='Funding']/@ref</path><path code="Country" name="Country" text="Recipient Country" priority="2" search="yes" group="yes">recipient-country/@code</path><path assertion="either recipent-country or recipient-region but not both">
        not (exists($activity/recipient-country) and exists($activity/recipient/region))
    </path><path type="xs:integer">recipient-country/@percentage</path><path assertion="percentages of countries should sum to 100">
        if (count($activity/recipient-country) &gt; 1) then sum($activity/recipient-country/@percentage[. castable as xs:integer]) = 100 else true()
    </path><path code="Region" name="Region" text="Recipient Region" search="yes" group="yes" priority="3">recipient-region/@code</path><path type="xs:integer">recipient-region/@percentage</path><path assertion="percentages of regions should sum to 100">
        if (count($activity/recipient-region) &gt; 1) then sum($activity/recipient-region/@percentage[. castable as xs:integer]) = 100 else true()
    </path><path assertion="every location must be named">every $l in $activity/location satisfies exists($l/name)</path><path type="xs:integer">location/@percentage</path><path code="LocationType">location/location-type/@code</path><path code="Country" name="Location">location/administrative/@country</path>
<!--    
      <path code="Admin-1-code">location/administrative/@adm1</path>
      <path code="Admin-2-code">location/administrative/@adm2</path>
      
--><path type="xs:decimal">location/coordinates/@latitude</path><path type="xs:decimal">location/coordinates/@longitude</path><path code="GeographicalPrecision">location/coordinates/@precision</path><path code="GazatteerAgencyCode">location/gazetteer-entry/@gazetteer-ref</path><path type="xs:integer">location/gazetteer-entry</path><path code="Sector" name="Sector" search="yes" group="yes" priority="2">sector/@code</path><path assertion="percentages of sectors in every vocabulary including the default vocabulary should sum to 100">
        every $vocabulary in distinct-values($activity/sector/@vocabulary)
        satisfies
        (if (count($activity/sector[@vocabulary=$vocabulary]) &gt; 1) then sum($activity/sector[@vocabulary=$vocabulary]/@percentage[. castable as xs:integer]) = 100 else true())
         and 
        (if (count($activity/sector[empty(@vocabulary)]) &gt; 1) then sum($activity/sector[empty(@vocabulary)]/@percentage[. castable as xs:integer]) = 100 else true())
        
    </path><path code="SectorCategory" name="SectorCategory" search="yes" group="yes" priority="3">sector[@vocabulary="DAC-3"]/@code</path><path code="Vocabulary">sector/@vocabulary</path><path type="xs:integer">sector/@percentage</path><path code="PolicyMarker">policy-marker/@code</path><path code="PolicySignificance">policy-marker/@significance</path><path code="Vocabulary">policy-marker/@vocabulary</path><path code="CollaborationType">collaboration-type/@code</path><path code="FlowType" name="Default">default-flow-type/@code</path><path code="FinanceType" name="Default">default-finance-type/@code</path><path code="AidType" name="Default">default-aid-type/@code</path><path code="TiedStatus" name="Default">default-tied-status/@code</path><path code="BudgetType">budget/@type</path><path type="xs:integer">budget/value</path><path type="xs:date">budget/value/@value-date</path><path code="Currency" name="Budget">budget/value/@currency</path><path assertion="every budget period-start requires an iso-date">every $t in $activity/budget/period-start satisfies exists($t/@iso-date)</path><path assertion="every budget period-end requires an iso-date">every $t in $activity/budget/period-end satisfies exists($t/@iso-date)</path><path type="xs:integer">planned-disbursement/value</path><path type="xs:date">planned-disbursement/value/@value-date</path><path code="Currency" name="Planned Disbursement">planned-disbursement/value/@currency</path><path assertion="every planned-disbursement period-start requires an iso-date">every $t in $activity/planned-disbursement/period-start satisfies exists($t/@iso-date)</path><path assertion="every planned-disbursement period-end requires an iso-date">every $t in $activity/planned-disbursement/period-end satisfies exists($t/@iso-date)</path><path code="TransactionType">transaction/transaction-type/@code</path><path code="OrganisationIdentifier">transaction/provider-org/@ref</path><path id="Activity" name="Provider">transaction/provider-org/@provider-activity-id</path><path code="OrganisationIdentifier">transaction/receiver-org/@ref</path><path id="Activity" name="Recipient">transaction/receiver-org/@receiver-activity-id</path><path type="xs:integer">transaction/value</path><path type="xs:date">transaction/value/@value-date</path><path code="Currency" name="Transaction">transaction/value/@currency</path><path assertion="every transaction value requires an iso-date">every $t in $activity/transaction/value satisfies exists($t/@value-date)</path><path code="FlowType" name="Transaction">transaction/flow-type/@code</path><path code="FinanceType" name="Transaction">transaction/finance-type/@code</path><path code="AidType" name="Transaction">transaction/aid-type/@code</path><path code="DisbursementChannel">transaction/disbursement-channel/@code</path><path code="TiedStatus" name="Transaction">transaction/tied-status/@code</path><path code="FileFormat">document-link/@format</path><path code="FileFormat">document-link/category/@code</path><path code="DocumentCategory">document-link/@category</path><path id="Activity" name="Related Activity">related-activity/@ref</path><path code="RelatedActivityType">related-activity/@type</path><path code="ConditionType">conditions/condition/@type</path><path type="xs:boolean">conditions/@attached</path><path code="IndicatorMeasure">result/indicator/@measure</path><path code="ResultType">result/@type</path></paths>